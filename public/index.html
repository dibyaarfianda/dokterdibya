<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<!-- 
        Awesome Template
        http://www.templatemo.com/preview/templatemo_450_awesome
        -->
		<title>Dokter Dibya</title>
		<meta name="keywords" content="">
		<meta name="description" content="">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!-- Cache-busted core styles -->
		<link rel="stylesheet" href="css/animate.min.css?v=20251121">
		<link rel="stylesheet" href="css/bootstrap.min.css?v=20251121">
		<link rel="stylesheet" href="css/font-awesome.min.css?v=20251121">
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="css/templatemo-style.css?v=20251121">
		<!-- Cache-busted core scripts -->
		<script src="js/jquery.js?v=20251121c"></script>
		<script src="js/bootstrap.min.js?v=20251121c"></script>
        <script src="js/jquery.singlePageNav.min.js?v=20251121c"></script>
		<script src="js/typed.js?v=20251121c"></script>
		<script src="js/wow.min.js?v=20251121c"></script>
		<script src="js/custom.js?v=20251121c"></script>
		<script>
		// Fix dropdown in mobile collapsed navbar
		$(document).ready(function() {
			// When navbar is collapsed (mobile view)
			$('.navbar-collapse').on('show.bs.collapse', function() {
				// Enable dropdown toggle in mobile
				$('.navbar-nav .dropdown > a').on('click', function(e) {
					var $dropdown = $(this).parent();
					var isOpen = $dropdown.hasClass('open');
					
					// Close all other dropdowns
					$('.navbar-nav .dropdown').removeClass('open');
					
					// Toggle current dropdown
					if (!isOpen) {
						e.preventDefault();
						e.stopPropagation();
						$dropdown.addClass('open');
					}
				});
			});
			
			// When navbar is expanded (desktop view), restore normal behavior
			$('.navbar-collapse').on('hide.bs.collapse', function() {
				$('.navbar-nav .dropdown > a').off('click');
			});
			
			// Handle click outside to close dropdown in mobile
			$(document).on('click', function(e) {
				if (!$(e.target).closest('.navbar-nav .dropdown').length) {
					$('.navbar-nav .dropdown').removeClass('open');
				}
			});
		});
		</script>
	</head>
	<body id="top">

		<!-- start preloader -->
		<div class="preloader">
			<div class="sk-spinner sk-spinner-wave">
     	 		<div class="sk-rect1"></div>
       			<div class="sk-rect2"></div>
       			<div class="sk-rect3"></div>
      	 		<div class="sk-rect4"></div>
      			<div class="sk-rect5"></div>
     		</div>
    	</div>
    	<!-- end preloader -->

    	<!-- start navigation -->
		<nav class="navbar navbar-default templatemo-nav" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="icon icon-bar"></span>
						<span class="icon icon-bar"></span>
						<span class="icon icon-bar"></span>
					</button>
					<a href="#" class="navbar-brand"><img src="images/logo-white.svg" alt="Dr. Dibya" style="height: 67px; margin-top: -12px;"></a>
				</div>
				<div class="collapse navbar-collapse">
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#daftar">DAFTAR</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">MASUK <b class="caret"></b></a>
							<ul class="dropdown-menu login-dropdown">
								<li>
									<form id="navbar-login-form" style="padding: 12px;">
										<div class="form-group">
											<label style="color: #ffffff;">Email</label>
											<input type="email" class="form-control" id="navbar-email" name="email" autocomplete="email" placeholder="contoh@email.com" style="color: #000000;" required>
										</div>
										<div class="form-group">
											<label style="color: #ffffff;">Password</label>
											<input type="password" class="form-control" id="navbar-password" name="password" autocomplete="current-password" placeholder="Password" style="color: #000000;" required>
										</div>
										<div class="form-group text-right">
											<a href="reset-password.html" class="external text-info">Lupa Password?</a>
										</div>
										<button type="submit" class="btn btn-primary btn-block">Login</button>
									</form>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<!-- end navigation -->

    	<!-- start home -->
    	<section id="home">
    		<div class="container">
    			<div class="row">
    				<div class="col-md-offset-2 col-md-8">
                        <h1 class="wow fadeIn animated" data-wow-offset="50" data-wow-delay="0.9s" style="visibility: visible; animation-delay: 0.9s; animation-name: fadeIn;">Halo! <span>Selamat Datang</span></h1>
    					<div class="element">
                            <div class="sub-element">Privasi Anda prioritas kami</div>
                            <div class="sub-element">Akses riwayat medis kandungan Anda dimana saja, kapan saja</div>
                            <div class="sub-element">Terus berkembang mengikuti terapi modern dalam pelayanan kesehatan</div>
                        </div>
    					<a data-scroll href="#daftar" class="btn btn-default wow fadeInUp" data-wow-offset="50" data-wow-delay="0.6s">DAFTAR SEKARANG</a>
    				</div>
    			</div>
    		</div>
    	</section>
    	<!-- end home -->

    	<!-- start about -->
		<section id="about">
			<div class="container">
				<div class="row">
					<div class="col-md-12">
    					<h2 class="wow bounceIn" data-wow-offset="50" data-wow-delay="0.3s">DOKTER <span>ANDA</span></h2>
    				</div>
					<div class="col-md-12 text-center wow fadeIn" data-wow-offset="50" data-wow-delay="0.5s" style="margin-bottom: 50px;">
						<img src="images/doctor-dibya.jpg" alt="Dr. Dibya" style="max-width: 300px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
						<h3 style="margin-top: 20px; color: #3498db;">dr. Dibya Arfianda, SpOG, M.Ked.Klin.</h3>
						<p style="font-size: 16px; color: #ffffff;">Spesialis Obstetri dan Ginekologi</p>
					</div>
					<div class="col-md-4 col-sm-4 col-xs-12 wow fadeInLeft" data-wow-offset="50" data-wow-delay="0.6s">
						<div class="media">
							<div class="media-heading-wrapper">
								<div class="media-object pull-left">
									<i class="fa fa-stethoscope"></i>
								</div>
								<h3 class="media-heading">REKAM MEDIS PRIVAT</h3>
							</div>
							<div class="media-body">
								<p>Hasil pemeriksaan, USG, Laboratorium dalam genggaman Anda. Slide, scroll, tap! </p>
							</div>
						</div>
					</div>
					<div class="col-md-4 col-sm-4 col-xs-12 wow fadeInUp" data-wow-offset="50" data-wow-delay="0.9s">
						<div class="media">
							<div class="media-heading-wrapper">
								<div class="media-object pull-left">
									<i class="fa fa-clock-o"></i>
								</div>
								<h3 class="media-heading">AKSES TANPA BATAS</h3>
							</div>
							<div class="media-body">
								<p>Akses 24/7 demi kemudahan Anda dalam mendapatkan perawatan berkesinambungan.</p>
							</div>
						</div>
					</div>
					<div class="col-md-4 col-sm-4 col-xs-12 wow fadeInRight" data-wow-offset="50" data-wow-delay="0.6s">
						<div class="media">
							<div class="media-heading-wrapper">
								<div class="media-object pull-left">
									<i class="fa fa-shield"></i>
								</div>
								<h3 class="media-heading">KEAMANAN DATA</h3>
							</div>
							<div class="media-body">
								<p>Data Anda terenkripsi dan dilindungi dengan standar keamanan tertinggi.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- end about -->

    	<!-- start daftar -->
    	<section id="daftar">
    		<div class="container">
    			<div class="row">
    				<div class="col-md-12">
    					<h2 class="wow bounceIn" data-wow-offset="50" data-wow-delay="0.3s">DAFTAR <span>AKUN BARU</span></h2>
    				</div>
    				<div class="col-md-offset-3 col-md-6 col-sm-offset-2 col-sm-8 col-xs-12 wow fadeInUp" data-wow-offset="50" data-wow-delay="0.9s" style="text-align: center;">
						<a href="register.html" class="form-control external btn-daftar" style="
    						display: inline-flex;
    						align-items: center;
    						justify-content: center;
    						width: 100%;
    						max-width: 400px;
    						padding: 16px 24px;
    						background: linear-gradient(135deg, #0066FF 0%, #0052CC 100%);
    						color: #ffffff;
    						text-decoration: none;
    						font-size: 18px;
    						font-weight: 600;
    						font-family: 'Poppins', sans-serif;
    						border-radius: 12px;
    						transition: all 0.3s ease;
    						box-shadow: 0 8px 20px rgba(0, 102, 255, 0.3);
    						letter-spacing: 0.5px;
    						cursor: pointer;
    						min-height: 52px;
    					" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 30px rgba(0, 102, 255, 0.5)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(0, 102, 255, 0.3)';">
    						DAFTAR SEKARANG
    					</a>

    					<p style="text-align: center; color: #ddd; font-size: 14px; margin-top: 20px;">
    						Sudah punya akun? <a href="login.html" class="external" style="color: #3498db; text-decoration: underline;">Login di sini</a>
    					</p>
    				</div>
    			</div>
    		</div>
    	</section>
    	<!-- end daftar -->

        <!-- start copyright -->
<footer id="copyright" style="margin-top: 50px;padding-top: 10px;padding-bottom: 10px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p class="wow bounceIn animated animated" data-wow-offset="30" data-wow-delay="0.3s" style="visibility: visible; animation-delay: 0.3s; animation-name: bounceIn;">
                       	Copyright ¬© 2025 dokter<span style="color: #0066FF;">DIBYA</span>. All Rights Reserved.</p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end copyright -->

	<script type="module">
	// Import API service
	import { apiService } from './scripts/api-service.js';

	// Handle navbar login form
	document.addEventListener('DOMContentLoaded', function() {
		const loginForm = document.getElementById('navbar-login-form');
		if (loginForm) {
			loginForm.addEventListener('submit', async function(e) {
				e.preventDefault();

				const email = document.getElementById('navbar-email').value;
				const password = document.getElementById('navbar-password').value;
				const submitBtn = loginForm.querySelector('button[type="submit"]');

				// Disable button and show loading
				submitBtn.disabled = true;
				submitBtn.textContent = 'Loading...';

				try {
					const response = await apiService.post('/auth/login', {
						email,
						password
					});

					if (response.success) {
						// Store token and user info based on user type
						if (response.data.user.user_type === 'staff') {
							// Staff login - use sessionStorage
							sessionStorage.setItem('auth_token', response.data.token);
							sessionStorage.setItem('user_id', response.data.user.id);
							sessionStorage.setItem('user_email', email);
							sessionStorage.setItem('user_name', response.data.user.name);
							sessionStorage.setItem('user_type', 'staff');
							window.location.href = '/staff/index.html';
						} else {
							// Patient login - use localStorage with patient_ prefix
							localStorage.setItem('patient_token', response.data.token);
							localStorage.setItem('patient_user', JSON.stringify({
								id: response.data.user.id,
								name: response.data.user.name,
								email: response.data.user.email,
								user_type: 'patient'
							}));
							window.location.href = '/patient-dashboard.html';
						}
					} else {
						alert(response.message || 'Login failed');
						submitBtn.disabled = false;
						submitBtn.textContent = 'Login';
					}
				} catch (error) {
					console.error('Login error:', error);
					alert('An error occurred during login');
					submitBtn.disabled = false;
					submitBtn.textContent = 'Login';
				}
			});
		}
	});
	</script>
	<script>
	// Debug: Log all click events on the document
	document.addEventListener('click', function(e) {
		if (e.target.tagName === 'A' || e.target.closest('a')) {
			var link = e.target.tagName === 'A' ? e.target : e.target.closest('a');
			console.log('üîç CLICK DEBUG:', {
				tag: link.tagName,
				href: link.getAttribute('href'),
				class: link.className,
				text: link.textContent.trim().substring(0, 30),
				defaultPrevented: e.defaultPrevented,
				phase: e.eventPhase === 1 ? 'CAPTURING' : e.eventPhase === 2 ? 'AT_TARGET' : 'BUBBLING'
			});
		}
	}, true); // Capture phase to see all events

	// Force navigation to .html pages - override singlePageNav
	$(window).on('load', function() {
		console.log('‚úÖ Window loaded, initializing navigation override...');

		// Wait a bit to ensure singlePageNav is fully initialized
		setTimeout(function() {
			console.log('‚è±Ô∏è Timeout complete, looking for .html links...');

			// Unbind singlePageNav from all .html links
			var htmlLinks = $('a[href$=".html"]');
			console.log('üìã Found ' + htmlLinks.length + ' .html links:', htmlLinks.map(function() {
				return this.href;
			}).get());

			htmlLinks.off('click.singlePageNav');
			console.log('üîì Unbound singlePageNav from .html links');

			// Force direct navigation with highest priority (useCapture=true)
			var targetLinks = document.querySelectorAll('a[href="register.html"], a[href="login.html"], a[href="reset-password.html"]');
			console.log('üéØ Found ' + targetLinks.length + ' target links to override');

			targetLinks.forEach(function(link, index) {
				console.log('üîß Processing link ' + (index + 1) + ':', link.href, link.textContent.trim());

				// Remove all existing event listeners by cloning
				var newLink = link.cloneNode(true);
				link.parentNode.replaceChild(newLink, link);
				console.log('‚ôªÔ∏è Cloned and replaced link ' + (index + 1));

				// Add our navigation handler
				newLink.addEventListener('click', function(e) {
					console.log('üöÄ NAVIGATION OVERRIDE TRIGGERED!');
					console.log('   Target:', this.href);
					console.log('   Event phase:', e.eventPhase);

					e.preventDefault();
					e.stopPropagation();
					e.stopImmediatePropagation();

					var href = this.getAttribute('href');
					console.log('‚û°Ô∏è Navigating to:', href);
					window.location.href = href;
					return false;
				}, true); // Use capture phase

				console.log('‚úÖ Added click handler to link ' + (index + 1));
			});

			console.log('‚úÖ Navigation override complete!');
		}, 100);
	});
	</script>
	</body>
</html>